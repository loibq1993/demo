"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[5681],{5681:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var s=a(3396),n=a(7139);const o=e=>((0,s.dD)("data-v-d413a148"),e=e(),(0,s.Cn)(),e),i={class:"bg-light min-vh-100 d-flex flex-row mb-5"},l={class:"header-content w-50 m-auto mb-5"},r={class:"border p-4"},c={class:"title row"},d=o((()=>(0,s._)("label",{class:"col-3 mb-2"},"Title: ",-1))),u={class:"col-9"},m={class:"description row"},_=o((()=>(0,s._)("label",{class:"col-3 mb-2"},"Description: ",-1))),h={class:"col-9"},w={class:"start_date row"},f=o((()=>(0,s._)("label",{class:"col-3 mb-2"},"Start date: ",-1))),p={class:"col-9"},v={class:"end_date row"},x=o((()=>(0,s._)("label",{class:"col-3 mb-2"},"End date: ",-1))),b={class:"col-9"},g=o((()=>(0,s._)("div",{class:"time row"},[(0,s._)("label",{class:"col-3 mb-2"},"Time: "),(0,s._)("span",{class:"col-9",id:"countdown"})],-1))),q={class:"exam-content border p-4"},D={class:"submit mt-3 row"};function T(e,t,a,o,T,y){const k=(0,s.up)("FillTheBlank"),M=(0,s.up)("CRow"),E=(0,s.up)("CForm"),C=(0,s.up)("CContainer");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Wm)(E,{action:"#",id:"formExam"},{default:(0,s.w5)((()=>[(0,s.Wm)(M,{class:"justify-content-center"},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",r,[(0,s._)("div",c,[d,(0,s._)("span",u,(0,n.zw)(T.exam.title),1)]),(0,s._)("div",m,[_,(0,s._)("span",h,(0,n.zw)(T.exam.description),1)]),(0,s._)("div",w,[f,(0,s._)("span",p,(0,n.zw)(y.format_date(T.exam.start_date)),1)]),(0,s._)("div",v,[x,(0,s._)("span",b,(0,n.zw)(y.format_date(T.exam.end_date)),1)]),g])]),(0,s._)("div",q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(T.exam_questions,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[1===e.questions[0].type?((0,s.wg)(),(0,s.j4)(k,{key:0,question:e.questions[0],index:t+1},null,8,["question","index"])):(0,s.kq)("",!0)])))),128))])])),_:1}),(0,s._)("div",D,[(0,s._)("button",{type:"submit",id:"form-submit",class:"btn btn-success m-auto text-white w-auto",onClick:t[0]||(t[0]=(...e)=>y.save&&y.save(...e))},"Save ")])])),_:1})])),_:1})])}a(7658);var y=a(6125),k=a(6797),M=a.n(k);const E={class:"fill_the_blank mb-5"},C={class:"question"},B={class:"title form-label",style:{"font-weight":"bold"}},H={class:"content"},I=["innerHTML"];function z(e,t,a,o,i,l){return(0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("div",C,[(0,s._)("div",B,"Question "+(0,n.zw)(a.index)+": "+(0,n.zw)(a.question.title),1),(0,s._)("div",H,[(0,s._)("div",{innerHTML:l.questionHTML},null,8,I)])])])}var L={name:"FillTheBlank",props:["question","index"],data(){return{answers:[]}},computed:{questionHTML(){let e=this.question.question,t=this.question.full_answers;for(let a=0;a<t.length;a++){let s=t[a].correct_answers[0].correct_answer_detail.correct_answer.length;e=e.replace("___",'<input type="text" name="answers_'+t[a].id+'[]" class="replaced-input" style="width: '+s+'0px"/>')}return e}},methods:{}},F=a(89);const S=(0,F.Z)(L,[["render",z]]);var Y=S,j=a(1186),N={name:"Exam",components:{FillTheBlank:Y},data(){return{view:NaN,exam_questions:"",answers:"",exam:[],href:window.location,countdown:"",timer:""}},created(){this.fetchData()},methods:{fetchData(){let e=fetch("http://localhost:8000/api/test/exams/"+this.$route.params.id,{method:"GET",headers:y.v.headers}).then((function(e){if(200!==e.status)throw e.status;return e.json()}));e.then((e=>{e.exam||j.Z.push({name:"Page404"}),this.exam=e.exam,this.exam_questions=e.exam.exam_questions;let t=this.exam.count_down,a=t.split(":");this.timer=1e3*(3600*a[0]+60*a[1]+ +a[2]),this.countDown()}))},format_date(e){if(e)return M()(String(e)).format("YYYY-MM-DD")},countDown(){var e=(new Date).getTime(),t=e+this.timer,a=setInterval((function(){let e=(new Date).getTime();var s=new Date(t-e).getTime(),n=Math.floor(s%864e5/36e5),o=Math.floor(s%36e5/6e4),i=Math.floor(s%6e4/1e3);document.getElementById("countdown").innerHTML=n+"h "+o+"m "+i+"s ",s<0&&(clearInterval(a),document.getElementById("form-submit").click())}),1e3)},async save(e){e.preventDefault();let t=document.getElementById("formExam"),a=new FormData(t);var s=[];let n={};for(let[o,i]of a.entries())o!==s[o]?(s[o]=o,n[o]=[],n[o].push(i)):n[o].push(i);n.exam_id=this.exam.id,n.time=document.getElementById("countdown").innerHTML,fetch("http://localhost:8000/api/test/exams/"+this.$route.params.id,{method:"POST",headers:y.v.headers,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((e=>{console.log(e)}))}}};const W=(0,F.Z)(N,[["render",T],["__scopeId","data-v-d413a148"]]);var Z=W}}]);
//# sourceMappingURL=5681.b243987a.js.map